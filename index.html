<!DOCTYPE html>
<html>
  <head>
    <!--styles-->
    <link rel="stylesheet" type="text/css" href="styles/styles.css">
    <!--lib-->
    <script src='javascript/lib/jquery.js'></script>
    <script src='javascript/lib/underscore.js'></script>
    <script src='javascript/lib/handlebars.js'></script>
    <script src='javascript/lib/backbone.js'></script>
    <!--data-->
    <script src='javascript/jsondata.js'></script>
    <!--namespace-->
    <script src='javascript/knotch.js'></script>
    <!--views-->
    <script src='javascript/views/appView.js'></script>
    <script src='javascript/views/navbarView.js'></script>
    <script src='javascript/views/userDataView.js'></script>
    <script src='javascript/views/colorBarView.js'></script>
    <script src='javascript/views/knotchView.js'></script>
    <script src='javascript/views/knotchesView.js'></script>
    <!--models-->
    <script src='javascript/models/userModel.js'></script>
    <script src='javascript/models/knotchModel.js'></script>
    <!--collections-->
    <script src='javascript/collections/knotchCollection.js'></script>
    <!--handlebars helpers-->
    <script src='javascript/helpers/handlebarHelpers.js'></script>
  </head>
  <body>
    <!--templates-->
    <script id = 'topbar-template' type="text/x-handlebars-template">
      <div class = 'topbar'><img class = 'logo' src = 'styles/assets/knotch-logo.png'/><div>{{name}}</div><img class = 'undershadow' src = 'styles/assets/nav-bar.png'/></div>
    </script>
    <script id = 'userData-template' type="text/x-handlebars-template">
      <div class = 'userData'>
        <div>
          <img class = 'profilePic' src = "{{profilePicUrl}}" width='100' height='100'/>
        </div>
        <div class = 'name'> <h2>{{name}}</h2></div>
        <div class = 'location'> {{location}} </div>
        <div class = 'stats'>
          <div> {{num_topics}} Topics </div>
          <div class = 'followers'> {{num_followers}} Followers </div>
          <div class = 'following'> {{num_following}} Following </div>
          <div> {{num_glory}} Glory </div>
        </div>
      </div>
    </script>
    <script id = 'colorBar-template' type="text/x-handlebars-template">
      <div class = 'divider'>
        <div class = 'colors' style = 'width:{{floorPlus colorWidth}}px'>
          {{#each sentiments}}
            <div class = 'color {{classNum @key}}' style = "width:{{width ../colorWidth this}}px" data-number = '{{@key}}'></div>
          {{/each}}
        </div>
      </div>
    </script>
    <script id = 'knotch-template' type="text/x-handlebars-template">
      <div class = 'knotch' style = 'width:{{floor colorWidth}}px'>
        <div class = 'topKnotch'>
          <h2 class = 'cat'>{{category.name}}</h2>
          <img class = 'sideT' src = 'styles/assets/topic-arrow.png'/>
        </div>
        <div class = 'knotchContent {{classNumKnotch sentiment}}'>
          <p>{{comment}}</p>
        </div>
        <div>
          <img class = 'speecharrow' src = 'knotchboxes/triangle{{sentiment}}.png'/>
        </div>
        <div class = 'author'>
          <img src = '{{userId.profilePicUrl}}' width='60' height='60'/>
          <h3>{{userId.name}}<h3>
        </div>
        {{#each replies}}
          <div class = 'reply'>
             <img src = '{{userId.profilePicUrl}}' height='30px' width='30px'/>
             <p> <span>{{userId.name}}</span> "{{reply}}"</p>
          </div>
        {{/each}}
        <div>
          <input type="text">
        </div>
      </div>
    </script>


    <!--initialize backbone-->
    <script type="text/javascript">
      $(function() {
        knotch.init();
      });
    </script>
  </body>
</html>